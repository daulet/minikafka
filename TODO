# Must

bench: e2e latency
bench: idle time, after running tests (all conns should be closed)

move tests to docker:
test when pub or sub went away (no close) - verify recent changes to pub & sub timeouts (last 2 commits)
add a health check to ensure that at least one test ran
Add latency test to verify write/read decoupling in publisher: write shouldnt take ~= latency
setup benchmark, start with kafka, use toxiproxy to simulate latency across brokers
test that broker.log is appended, not replaced
publisher test fails if we dont listen for ack in test
test publish failure is correctly communicated to publisher


batching in publish and subscribe
Multi-topic support per TCP conn, provide bench to demonstarte difference
Multiple broker support with all ack

clean up producer.go or setup better benchmark:
https://docs.confluent.io/kafka-clients/go/current/overview.html#go-example-code


## Nice to have

investigate results of: `go build -gcflags='-m' . 2>&1`

too many duplicated tests: client/bench/test - unify or keep in sync
speed up docker compose build - not enough caching (go download and build steps)

Publisher and Subscriber should implement Writer and Reader interface respectively


## Future

pick features to support from here: https://medium.com/swlh/why-kafka-is-so-fast-bde0d987cd03

read system design articles on kafka/queues for:
figure out deployment - image for brokers, how they boot, recover; how subs and pubs discover kafka
